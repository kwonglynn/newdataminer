{% extends "mypython/base.html" %}

{% block title %}
  Conda
{% endblock title %}

{% block content %}
  <h4>What is a virtual environment?</h4>
  <div class="container">
    A virtual environment is a named, isolated, working copy of
    <b>Python</b> that that maintains its own files, directories, and paths
    so that you can work with specific versions of libraries or Python
    itself without affecting other Python projects. Virtual environmets
    make it easy to cleanly separate different projects and avoid problems
    with different dependencies and version requiremetns across components.
    The <code class="w3-codespan">conda</code> command is the preferred
    interface for managing intstallations and virtual environments with the
    Anaconda Python distribution. If you  have a vanilla Python
    installation or other Python distribution, see
    <a href="https://virtualenv.readthedocs.io/en/latest/">virtualenv</a>.
  </div>

  <h4>Conda channels</h4>
  <div class="container">
    <p>Channels are locations where Navigator and conda look for packages.
    The easiest way to use and manage custom channels is to use a
    private or public repository on Anaconda.org.
    Common conda channels:</p>
    <ul>
      <li class="referencelist"><a href="https://repo.anaconda.com/">anconda (default)</a></li>
      <li class="referencelist"><a href="http://conda-forge.org/docs/user/introduction.html">
        conda-forge</a></li>
    </ul>
    <p>How to install packages from a specified channel?</p>
    <p>You have to register the specified channel as a default package
      source for conda. After that, using conda install package-name will
      also find packages in the specified channel:</p>
    <div class="w3-code pythonHigh notranslate">
      conda config --add channels conda-forge <br>
      conda config --set channel_priority strict  <br>
      conda config --remove channels some-channel # Remove the channel <br>
    </div>
  </div>

  <h4>Useful commands</h4>
  <div class="container">
    <h6>1. Check the status of conda.</h6>
    <div class="w3-code pythonHigh notranslate">
      conda -V <br>
    </div>
  </div>

  <div class="container">
    <h6>2. Check if conda is up to date.</h6>
    <div class="w3-code pythonHigh notranslate">
      conda update conda <br>
    </div>
  </div>

  <div class="container">
    <h6>3. Create an environment with a specific version of Python.</h6>
    <div class="w3-code pythonHigh notranslate">
      conda create -n yourenvname python=x.x<br>
    </div>
  </div>

  <div class="container">
    <h6>4. To see a list of all your environments, use the command:</h6>
    <div class="w3-code pythonHigh notranslate">
      conda info -e <br>
      conda info --envs <br>
    </div>
  </div>

  <div class="container">
    <h6>5. To activate or deactivate a virtual environment:</h6>
    <div class="w3-code pythonHigh notranslate">
      conda activate yourenvname <br>
      conda deactivate <br>
    </div>
  </div>

  <div class="container">
    <h6>6. Delete a no longer needed virtual environment
        and associated packages:</h6>
    <div class="w3-code pythonHigh notranslate">
      conda env remove --name myenv <br>
    </div>
  </div>

  <div class="container">
    <h6>7. Search for a specific package.</h6>
    <p>If you want to use a specific Python version, it is best to use
       an environment with that version. </p>
    <div class="w3-code pythonHigh notranslate" style="margin-bottom:1px;">
      conda search "^python$" <br>
      conda search scipy <br>
    </div>
  </div>

  <div class="container">
    <h6>8. To install a specific package such as SciPy into an
        existing environment "myenv".</h6>
    <p>If you do not specify the environment name, which in this example is
       done by --name myenv, the package installs into the current
       environment:</p>
    <div class="w3-code pythonHigh notranslate">
      conda install --name myenv scipy <br>
    </div>
  </div>

  <div class="container">
    <h6>9. To install a specific version of a package such as SciPy:</h6>
    <div class="w3-code pythonHigh notranslate">
      conda install scipy=0.15.0 <br>
    </div>
  </div>

  <div class="container">
    <h6>10. To install multiple packages at once, such as SciPy and
      cURL::</h6>
    <div class="w3-code pythonHigh notranslate">
      conda install scipy=0.15.0 curl=7.26.0 <br>
    </div>
  </div>

  <div class="container">
    <h6>11. To check the packages installed</h6>
    <div class="w3-code pythonHigh notranslate">
      conda list <br>
      conda list -n myenv <br>
      conda list -n myenv scipy
    </div>
  </div>

  <div class="container">
    <h6>12. To list all of the packages in a deactivated environment:</h6>
    <div class="w3-code pythonHigh notranslate">
      conda list -n myenv <br>
    </div>
  </div>

  <div class="container">
    <h6>13. To remove a package such as SciPy in an environment
       such as myenv:</h6>
    <div class="w3-code pythonHigh notranslate">
      conda remove -n myenv scipy <br>
    </div>
    <p><em>Note:</em> On windows you may need to delete the environment folder manually.</p>
  </div>

  <div class="container">
    <h6>14. Create an environment for the scrapy package from the conda-forge
        channel:</h6>
    <div class="w3-code pythonHigh notranslate">
      conda create -n scrapy -c conda-forge scrapy <br>
    </div>
  </div>

  <h4>Installing non-conda packages</h4>
  <div class="container">
    <p>If a package is not available from conda or Anaconda.org, you
       may be able to find and install the package with another package
       manager like pip.</p>
    <p>Pip packages do not have all the features of conda packages and
       we recommend first trying to install any package with conda. If
        the package is unavailable through conda, try installing it
         with pip.</p>
    <p>To gain the benefits of conda integration, be sure to install pip
       inside the currently active conda environment and then install
       packages with that instance of pip. </p>
    <p>To install a non-conda package with <span class="w3-codespan">
       pip</span>:</p>
    <h6>1. To use pip to install a program such as See:</h6>
    <div class="w3-code pythonHigh notranslate">
      conda install -n myenv pip <br>
      conda activate myenv <br>
      pip install see <br>
    </div>
    <h6>2. To verify the package was installed:</h6>
    <div class="w3-code pythonHigh notranslate">
      conda list <br>
    </div>
  </div>

  <h4>Practical applications.</h4>
  <div class="container">
    <h6>1. Install Django</h6>
    <div class="w3-code pythonHigh notranslate">
      conda create -n django2 -c conda-forge django <br>
      pip install mysqlclient <br>
    </div>
  </div>

  <div class="container">
    <h6>2. Install scikit-learn</h6>
    <div class="w3-code pythonHigh notranslate">
      conda create -n sklearn -c conda-forge scikit-learn  <br>
      conda install -n sklearn -c conda-forge ipython <br>
      conda install -n sklearn -c conda-forge pandas <br>
      pip install jupyter # Note jupyter can only be installed properly with pip!<br>
    </div>
  </div>

  <div class="container">
    <h6>3. Install keras</h6>
    <div class="w3-code pythonHigh notranslate">
      conda create -n keras -c conda-forge keras <br>
      conda install -n keras -c conda-forge ipython <br>
      conda install -n keras -c conda-forge pandas <br>
      pip install jupyter <br>
    </div>
  </div>

  <div class="container">
    <h6>4. Install pytorch</h6>
    <div class="w3-code pythonHigh notranslate">
      conda create -n pytorch -c pytorch pytorch <br>
      conda install -n pytorch -c pytorch ipython <br>
      conda install -n pytorch -c pytorch pandas <br>
      pip install jupyter <br>
      # The supplementary packages should be installed from the channel as the<br>
      # main package for compatibility.<br>
    </div>
  </div>

  <div class="container">
    <h6>5. Install RDKit.</h6>
    <div class="w3-code pythonHigh notranslate">
      ### Main packages ### <br>
      conda create -n rdkit -c rdkit rdkit # Default <br>
      conda create -n rdkit -c conda-forge rdkit # On the OS when can't get the latest version <br>
      pip install jupyter <br>
    </div>
  </div>

  <div class="container">
    <p><strong>Note:</strong></p>
    <ol>
      <li>Different channels (anaconda, conda-forge or other) can
          have different versions for the same package!</li>
      <li>Install the main package and supplementary from the same channel.</li>
      <li>Search for the package at <a href="https://anaconda.org/">
          ANACONDA CLOUD</a>. Conda-forge almost always has the latest
          version for the same package. However, it may have some in-compatibility
          issues with other package. Many times, only install one conda-force package
          in one environment.</li>
      <li>Different OS (Linux, Windows or MacOS) can have different
          default versions for the same package! You may need to
          switch the channel in order to install the latest verion of the
          package for your specific OS.</li>
      <li>If there are version-dependencies for some packages like rdkit and pytorch, it is
          better to install these packages in independent environmets!</li>
      <li>Check the package list verisons before installing! Also check to see if some
          package will be <em>removed</em> or <em>downgraded!</em>. If yes,
          these packages need to be installed in separate environments.</li>
    </ol>
  </div>

  <h4>References</h4>
  <div class="container referencelist">
    <ul>
      <li><a href="https://uoa-eresearch.github.io/eresearch-cookbook/recipe/2014/11/20/conda/">
        Create virtual environments for python with conda</a></li>
      <li><a href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">
        Managing environments</a></li>
      <li><a href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-pkgs.html">
        Managing packages with conda</a></li>
      <li><a href="https://virtualenvwrapper.readthedocs.io/en/latest/install.html">
        Use pip to manage python environments</a></li>
      <li><a href="https://kapeli.com/cheat_sheets/Conda.docset/Contents/Resources/Documents/index">
        Common conda commands</a></li>
      <li><a href="https://docs.conda.io/projects/conda/en/latest/commands/create.html">
        Command reference</a></li>
    </ul>
  </div>

{% endblock content %}
